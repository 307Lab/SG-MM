<launch>
    <arg name="gui" default="true" />
  <!-- <arg name="BIOIK" default="false" /> -->
  <!-- send pr2 urdf to param server -->
  <group>
    <param name="robot_description" command="$(find xacro)/xacro '$(find fg_125)/urdf/open_manipulator_robot_LLB.urdf.xacro'" />
  </group>
  
    <!--  MOVE GROUP -->
  <!-- The semantic description that corresponds to the URDF -->
  <param name="robot_description_semantic" textfile="$(find fg_125_with_open_manipulator_moveit_config)/config/fg_125_with_open_manipulator.srdf" />
  <param name="robot_name" value="fg_125_manipulator"/>

  <!-- Load to the parameter server yaml files -->
  <group ns="robot_description_planning">
    <rosparam command="load" file="$(find fg_125_with_open_manipulator_moveit_config)/config/joint_limits.yaml"/>
  </group>

  <!-- Load default settings for kinematics; these settings are overridden by settings in a node's namespace -->
  <group ns="robot_description_kinematics">
    <rosparam command="load" file="$(find fg_125_with_open_manipulator_moveit_config)/config/kinematics.yaml"/>
    <!-- <group if="$(arg BIOIK)"> -->
      <param name="manipulator/kinematics_solver" value="bio_ik/BioIKKinematicsPlugin"/>
      <param name="manipulator_and_torso/kinematics_solver" value="bio_ik/BioIKKinematicsPlugin"/>
    <!-- </group> -->
  </group>

  <node name="move_group" launch-prefix="" pkg="moveit_ros_move_group" type="move_group" respawn="false" output="screen">
    <!-- Set the display variable, in case OpenGL code is used internally -->
    <env name="DISPLAY" value="$(optenv DISPLAY :0)" />

    <param name="allow_trajectory_execution" value="false"/>
    <param name="max_safe_path_cost" value="1"/>
    <param name="jiggle_fraction" value="0.05" />

<!--    move_group/MoveGroupPickPlaceAction-->
<!--    move_group/ClearOctomapService-->
<!--    move_group/MoveGroupCartesianPathService-->
    <param name="capabilities" value="move_group/MoveGroupExecuteService
                                      move_group/MoveGroupKinematicsService
                                      move_group/MoveGroupMoveAction
                                      move_group/MoveGroupPlanService
                                      move_group/MoveGroupQueryPlannersService
                                      move_group/MoveGroupStateValidationService
                                      move_group/MoveGroupGetPlanningSceneService
                                      move_group/ApplyPlanningSceneService
                                      " />

    <!-- Publish the planning scene of the physical robot so that rviz plugin can know actual robot -->
    <param name="planning_scene_monitor/publish_planning_scene" value="true" />
    <param name="planning_scene_monitor/publish_geometry_updates" value="false" />
    <param name="planning_scene_monitor/publish_state_updates" value="false" />
    <param name="planning_scene_monitor/publish_transforms_updates" value="false" />
  </node>

  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find modulation_rl)/rviz/rviz_config_fg_125.rviz" if="$(arg gui)"/>
  <node pkg="modulation_rl" type="interactive_marker_node" name="interactive_marker_node" output="screen" if="$(arg gui)" />

</launch>
